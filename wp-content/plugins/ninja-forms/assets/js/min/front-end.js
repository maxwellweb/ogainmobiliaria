!function(){var e,t,i;!function(n){function r(e,t){return R.call(e,t)}function o(e,t){var i,n,r,o,l,a,s,d,c,f,u,h=t&&t.split("/"),m=y.map,g=m&&m["*"]||{};if(e&&"."===e.charAt(0))if(t){for(e=e.split("/"),l=e.length-1,y.nodeIdCompat&&_.test(e[l])&&(e[l]=e[l].replace(_,"")),e=h.slice(0,h.length-1).concat(e),c=0;c<e.length;c+=1)if(u=e[c],"."===u)e.splice(c,1),c-=1;else if(".."===u){if(1===c&&(".."===e[2]||".."===e[0]))break;c>0&&(e.splice(c-1,2),c-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((h||g)&&m){for(i=e.split("/"),c=i.length;c>0;c-=1){if(n=i.slice(0,c).join("/"),h)for(f=h.length;f>0;f-=1)if(r=m[h.slice(0,f).join("/")],r&&(r=r[n])){o=r,a=c;break}if(o)break;!s&&g&&g[n]&&(s=g[n],d=c)}!o&&s&&(o=s,a=d),o&&(i.splice(0,a,o),e=i.join("/"))}return e}function l(e,t){return function(){var i=w.call(arguments,0);return"string"!=typeof i[0]&&1===i.length&&i.push(null),h.apply(n,i.concat([e,t]))}}function a(e){return function(t){return o(t,e)}}function s(e){return function(t){p[e]=t}}function d(e){if(r(v,e)){var t=v[e];delete v[e],b[e]=!0,u.apply(n,t)}if(!r(p,e)&&!r(b,e))throw new Error("No "+e);return p[e]}function c(e){var t,i=e?e.indexOf("!"):-1;return i>-1&&(t=e.substring(0,i),e=e.substring(i+1,e.length)),[t,e]}function f(e){return function(){return y&&y.config&&y.config[e]||{}}}var u,h,m,g,p={},v={},y={},b={},R=Object.prototype.hasOwnProperty,w=[].slice,_=/\.js$/;m=function(e,t){var i,n=c(e),r=n[0];return e=n[1],r&&(r=o(r,t),i=d(r)),r?e=i&&i.normalize?i.normalize(e,a(t)):o(e,t):(e=o(e,t),n=c(e),r=n[0],e=n[1],r&&(i=d(r))),{f:r?r+"!"+e:e,n:e,pr:r,p:i}},g={require:function(e){return l(e)},exports:function(e){var t=p[e];return"undefined"!=typeof t?t:p[e]={}},module:function(e){return{id:e,uri:"",exports:p[e],config:f(e)}}},u=function(e,t,i,o){var a,c,f,u,h,y,R=[],w=typeof i;if(o=o||e,"undefined"===w||"function"===w){for(t=!t.length&&i.length?["require","exports","module"]:t,h=0;h<t.length;h+=1)if(u=m(t[h],o),c=u.f,"require"===c)R[h]=g.require(e);else if("exports"===c)R[h]=g.exports(e),y=!0;else if("module"===c)a=R[h]=g.module(e);else if(r(p,c)||r(v,c)||r(b,c))R[h]=d(c);else{if(!u.p)throw new Error(e+" missing "+c);u.p.load(u.n,l(o,!0),s(c),{}),R[h]=p[c]}f=i?i.apply(p[e],R):void 0,e&&(a&&a.exports!==n&&a.exports!==p[e]?p[e]=a.exports:f===n&&y||(p[e]=f))}else e&&(p[e]=i)},e=t=h=function(e,t,i,r,o){if("string"==typeof e)return g[e]?g[e](t):d(m(e,t).f);if(!e.splice){if(y=e,y.deps&&h(y.deps,y.callback),!t)return;t.splice?(e=t,t=i,i=null):e=n}return t=t||function(){},"function"==typeof i&&(i=r,r=o),r?u(n,e,t,i):setTimeout(function(){u(n,e,t,i)},4),h},h.config=function(e){return h(e)},e._defined=p,i=function(e,t,i){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");t.splice||(i=t,t=[]),r(p,e)||r(v,e)||(v[e]=[e,t,i])},i.amd={jQuery:!0}}(),i("../lib/almond",function(){}),i("models/formModel",[],function(){var e=Backbone.Model.extend({defaults:{beforeForm:"",afterForm:"",beforeFields:"",afterFields:"",wrapper_class:"",element_class:""},initialize:function(){var e=this;_.each(this.get("settings"),function(t,i){e.set(i,t)}),nfRadio.channel("form-"+this.get("id")).reply("get:fieldByKey",this.getFieldByKey,this),nfRadio.channel("form-"+this.get("id")).reply("add:error",this.addError,this),nfRadio.channel("form-"+this.get("id")).reply("remove:error",this.removeError,this),nfRadio.channel("forms").trigger("init:model",this),nfRadio.channel("form-"+this.get("id")).trigger("init:model",this)},getFieldByKey:function(e){return this.get("fields").findWhere({key:e})},addError:function(e,t){var i=this.get("errors");i.add({id:e,msg:t})},removeError:function(e){var t=this.get("errors"),i=t.get(e);t.remove(i)}});return e}),i("models/formCollection",["models/formModel"],function(e){var t=Backbone.Collection.extend({model:e});return t}),i("models/fieldErrorModel",[],function(){var e=Backbone.Model.extend({});return e}),i("models/fieldErrorCollection",["models/fieldErrorModel"],function(e){var t=Backbone.Collection.extend({model:e});return t}),i("models/fieldModel",["models/fieldErrorCollection"],function(e){var t=Backbone.Model.extend({defaults:{placeholder:"",value:"",label_pos:"",classes:"ninja-forms-field",reRender:!1,mirror_field:!1,confirm_field:!1,clean:!0,disabled:""},initialize:function(){this.set("formID",this.collection.options.formModel.get("id")),this.listenTo(nfRadio.channel("form-"+this.get("formID")),"reset",this.resetModel),this.bind("change",this.changeModel,this),this.bind("change:value",this.changeValue,this),this.set("errors",new e),nfRadio.channel("fields").trigger("init:model",this),nfRadio.channel(this.get("type")).trigger("init:model",this),nfRadio.channel("fields-"+this.get("type")).trigger("init:model",this),this.listenTo(nfRadio.channel("form-"+this.get("formID")),"loaded",this.formLoaded)},resetModel:function(){},changeModel:function(){nfRadio.channel("field-"+this.get("id")).trigger("change:model",this),nfRadio.channel(this.get("type")).trigger("change:model",this),nfRadio.channel("fields").trigger("change:model",this)},changeValue:function(){nfRadio.channel("field-"+this.get("id")).trigger("change:modelValue",this),nfRadio.channel(this.get("type")).trigger("change:modelValue",this),nfRadio.channel("fields").trigger("change:modelValue",this)},addWrapperClass:function(e){this.set("addWrapperClass",e)},removeWrapperClass:function(e){this.set("removeWrapperClass",e)},formLoaded:function(){nfRadio.channel("fields").trigger("formLoaded",this),nfRadio.channel("fields-"+this.get("type")).trigger("formLoaded",this)}});return t}),i("models/fieldCollection",["models/fieldModel"],function(e){var t=Backbone.Collection.extend({model:e,comparator:"order",initialize:function(e,t){this.options=t}});return t}),i("models/formErrorModel",[],function(){var e=Backbone.Model.extend({});return e}),i("models/formErrorCollection",["models/formErrorModel"],function(e){var t=Backbone.Collection.extend({model:e});return t}),i("controllers/formData",["models/formModel","models/formCollection","models/fieldCollection","models/formErrorCollection"],function(e,t,i,n){var r=Marionette.Object.extend({initialize:function(){var r=this;this.formCollection=new t,_.each(nfForms,function(t,o){var l=new e(t);r.formCollection.add(l);var a=new i(t.fields,{formModel:l});l.set("fields",a),l.set("loadedFields",t.fields);var s=new n;l.set("errors",s),nfRadio.channel("form").trigger("loaded",l),nfRadio.channel("form-"+l.get("id")).trigger("loaded",l)}),nfRadio.channel("app").reply("get:form",this.getForm,this),nfRadio.channel("app").reply("get:forms",this.getForms,this),nfRadio.channel("fields").reply("get:field",this.getField,this)},getForm:function(e){return this.formCollection.get(e)},getForms:function(){return this.formCollection},getField:function(e){var t=!1;return _.each(this.formCollection.models,function(i){t||(t=i.get("fields").get(e))}),t}});return r}),i("controllers/fieldError",["models/fieldErrorModel"],function(e){var t=Marionette.Object.extend({initialize:function(){nfRadio.channel("fields").reply("add:error",this.addError),nfRadio.channel("fields").reply("remove:error",this.removeError),nfRadio.channel("fields").reply("get:error",this.getError)},addError:function(e,t,i){var n=nfRadio.channel("fields").request("get:field",e),r=n.get("errors");r.add({id:t,msg:i}),n.set("errors",r),n.trigger("change:errors",n),nfRadio.channel("fields").trigger("add:error",n,t,i)},removeError:function(e,t){var i=nfRadio.channel("fields").request("get:field",e);if("undefined"!=typeof i){var n=i.get("errors"),r=n.get(t);"undefined"!=r&&(n.remove(r),i.set("errors",n),i.trigger("change:errors",i),nfRadio.channel("fields").trigger("remove:error",i,t))}},getError:function(e,t){var i=nfRadio.channel("fields").request("get:field",e),n=i.get("errors"),r=n.get(t);return"undefined"!=r?r:!1}});return t}),i("controllers/changeField",[],function(){var e=Marionette.Object.extend({initialize:function(){nfRadio.channel("nfAdmin").reply("change:field",this.changeField)},changeField:function(e,t){var i=nfRadio.channel(t.get("type")).request("before:updateField",e,t);i="undefined"!=typeof i?i:nfRadio.channel(t.get("parentType")).request("before:updateField",e,t),i="undefined"!=typeof i?i:jQuery(e).val(),t.set("isUpdated",!1),t.set("clean",!1),nfRadio.channel("field-"+t.get("id")).trigger("change:field",e,t),nfRadio.channel(t.get("type")).trigger("change:field",e,t),nfRadio.channel("fields").trigger("change:field",e,t),nfRadio.channel("nfAdmin").request("update:field",t,i)}});return e}),i("controllers/changeEmail",[],function(){var e=nfRadio.channel("email"),t=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i,i="invalid-email",n="Please enter a valid email address!",r=Marionette.Object.extend({initialize:function(){this.listenTo(e,"change:modelValue",this.emailChange),this.listenTo(e,"keyup:field",this.emailKeyup)},emailChange:function(e){var r=e.get("value"),o=e.get("id");0<r.length?t.test(r)?nfRadio.channel("fields").request("remove:error",o,i):nfRadio.channel("fields").request("add:error",o,i,n):nfRadio.channel("fields").request("remove:error",o,i)},emailKeyup:function(e,r,o){var l=jQuery(e).val(),a=r.get("id");0==l.length?(r.removeWrapperClass("nf-fail"),r.removeWrapperClass("nf-pass"),nfRadio.channel("fields").request("remove:error",a,i)):t.test(l)?t.test(l)&&(r.removeWrapperClass("nf-fail"),r.addWrapperClass("nf-pass"),nfRadio.channel("fields").request("remove:error",a,i)):(r.removeWrapperClass("nf-pass"),r.get("clean")||(r.addWrapperClass("nf-fail"),nfRadio.channel("fields").request("add:error",a,i,n)))}});return r}),i("controllers/fieldCheckbox",[],function(){var e=nfRadio.channel("checkbox"),t=Marionette.Object.extend({initialize:function(){e.reply("validate:required",this.validateRequired),nfRadio.channel("checkbox").reply("before:updateField",this.beforeUpdateField,this),nfRadio.channel("checkbox").reply("get:calcValue",this.getCalcValue,this)},beforeUpdateField:function(e,t){var i=jQuery(e).attr("checked");if(i)var n=1;else var n=0;return n},validateRequired:function(e,t){return e[0].checked},getCalcValue:function(e){return 1==e.get("value")?calcValue=e.get("checked_calc_value"):calcValue=e.get("unchecked_calc_value"),calcValue}});return t}),i("controllers/fieldCheckboxList",[],function(){var e=Marionette.Object.extend({initialize:function(){this.listenTo(nfRadio.channel("listcheckbox"),"init:model",this.register),nfRadio.channel("listcheckbox").reply("before:updateField",this.beforeUpdateField,this),nfRadio.channel("listcheckbox").reply("get:calcValue",this.getCalcValue,this)},register:function(e){if(e.set("renderOptions",this.renderOptions),e.set("renderOtherText",this.renderOtherText),e.set("selected",[]),0!=e.get("options").length){var t=_.filter(e.get("options"),function(e){return 1==e.selected});t=_.map(t,function(e){return e.value}),e.set("value",t)}},renderOptions:function(){var e=this,t="";if(""==this.value)var i=!0;else var i=!1;if(_.each(this.options,function(n){n.value==e.value&&(i=!0),n.fieldID=e.id,n.classes=e.classes,n.currentValue=e.value,n.selected&&e.selected.push(n.value);var r=_.template(jQuery("#nf-tmpl-field-listcheckbox-option").html());t+=r(n)}),1==this.show_other){"nf-other"==this.value&&(i=!1);var n={fieldID:this.id,classes:this.classes,currentValue:this.value,renderOtherText:this.renderOtherText,valueFound:i},r=_.template(jQuery("#nf-tmpl-field-listcheckbox-other").html());t+=r(n)}return t},renderOtherText:function(){if("nf-other"==this.currentValue||!this.valueFound){"nf-other"==this.currentValue&&(this.currentValue="");var e={fieldID:this.fieldID,classes:this.classes,currentValue:this.currentValue},t=_.template(jQuery("#nf-tmpl-field-listcheckbox-other-text").html());return t(e)}},getCalcValue:function(e){var t=0,i=e.get("options");return 0!=i.length&&_.each(e.get("value"),function(e){var n=_.find(i,function(t){return t.value==e});t=math.add(t,n.calc)}),t},beforeUpdateField:function(e,t){var i=t.get("selected")||[];"string"==typeof i&&(i=[i]);var n=jQuery(e).val(),r=jQuery(e).attr("checked");if(r)i.push(n);else{var o=i.indexOf(n);-1!=o&&i.splice(o,1)}return t.set("selected",i),1==t.get("show_other")&&t.set("reRender",!0),_.clone(i)}});return e}),i("controllers/fieldRadio",[],function(){var e=Marionette.Object.extend({initialize:function(){this.listenTo(nfRadio.channel("listradio"),"change:modelValue",this.changeModelValue),this.listenTo(nfRadio.channel("listradio"),"init:model",this.register),nfRadio.channel("listradio").reply("get:calcValue",this.getCalcValue,this)},register:function(e){if(e.set("renderOptions",this.renderOptions),e.set("renderOtherText",this.renderOtherText),0!=e.get("options").length){var t=_.find(e.get("options"),function(e){return 1==e.selected});"undefined"==typeof t&&(t=e.get("options")[0]),e.set("value",t.value)}},changeModelValue:function(e){1==e.get("show_other")&&e.set("reRender",!0)},renderOptions:function(){var e=this,t="";if(""==this.value)var i=!0;else var i=!1;if(_.each(this.options,function(n){n.value==e.value&&(i=!0),n.fieldID=e.id,n.classes=e.classes,n.currentValue=e.value;var r=_.template(jQuery("#nf-tmpl-field-listradio-option").html());t+=r(n)}),1==this.show_other){"nf-other"==this.value&&(i=!1);var n={fieldID:this.id,classes:this.classes,currentValue:this.value,renderOtherText:this.renderOtherText,valueFound:i},r=_.template(jQuery("#nf-tmpl-field-listradio-other").html());t+=r(n)}return t},renderOtherText:function(){if("nf-other"==this.currentValue||!this.valueFound){"nf-other"==this.currentValue&&(this.currentValue="");var e={fieldID:this.fieldID,classes:this.classes,currentValue:this.currentValue},t=_.template(jQuery("#nf-tmpl-field-listradio-other-text").html());return t(e)}},getCalcValue:function(e){var t=0;if(0!=e.get("options").length){var i=_.find(e.get("options"),function(t){return e.get("value")==t.value});"undefined"==typeof i&&(i=e.get("options")[0]);var t=i.calc}return t}});return e}),i("controllers/fieldNumber",[],function(){var e=Marionette.Object.extend({initialize:function(){this.listenTo(nfRadio.channel("number"),"init:model",this.maybeMinDefault),this.listenTo(nfRadio.channel("number"),"keyup:field",this.validateMinMax)},maybeMinDefault:function(e){if(""==e.get("value")){var t=e.get("num_min");e.set("value",t)}},validateMinMax:function(e,t){var i=jQuery(e),n=parseInt(i.val()),r=i.attr("min"),o=i.attr("max"),l=i.attr("step");r&&r>n?nfRadio.channel("fields").request("add:error",t.get("id"),"number-min","Number Min Error"):nfRadio.channel("fields").request("remove:error",t.get("id"),"number-min"),o&&n>o?nfRadio.channel("fields").request("add:error",t.get("id"),"number-max","Number Max Error"):nfRadio.channel("fields").request("remove:error",t.get("id"),"number-max"),n&&0!==n%l?nfRadio.channel("fields").request("add:error",t.get("id"),"number-step","Please increment by "+l):nfRadio.channel("fields").request("remove:error",t.get("id"),"number-step")}});return e}),i("controllers/mirrorField",[],function(){var e=nfRadio.channel("fields"),t=Marionette.Object.extend({listeningModel:"",initialize:function(){this.listenTo(e,"init:model",this.registerMirror)},registerMirror:function(e){if(e.get("mirror_field")){this.listeningModel=e;var t=e.get("mirror_field");this.listenTo(nfRadio.channel("field-"+t),"change:modelValue",this.changeValue)}},changeValue:function(e){this.listeningModel.set("value",e.get("value")),this.listeningModel.set("reRender",!0)}});return t}),i("controllers/confirmField",[],function(){var e=nfRadio.channel("fields"),t="confirm-mismatch",i="These fields must match!",n=Marionette.Object.extend({initialize:function(){this.listenTo(e,"init:model",this.registerConfirm),this.listenTo(e,"keyup:field",this.confirmKeyup)},registerConfirm:function(t){if(t.get("confirm_field")){var i=e.request("get:field",t.get("confirm_field"));i.set("confirm_with",t.get("id"));var n=i.get("id"),r=t.get("id");this.listenTo(nfRadio.channel("field-"+n),"change:modelValue",this.changeValue),this.listenTo(nfRadio.channel("field-"+r),"change:modelValue",this.changeValue)}},changeValue:function(n){if("undefined"==typeof n.get("confirm_with"))var r=n,o=e.request("get:field",r.get("confirm_field"));else var o=n,r=e.request("get:field",o.get("confirm_with"));var l=(o.get("id"),r.get("id"));""==r.get("value")||r.get("value")==o.get("value")?nfRadio.channel("fields").request("remove:error",l,t):nfRadio.channel("fields").request("add:error",l,t,i)},confirmKeyup:function(e,n,r){var o=jQuery(e).val();if(n.get("confirm_field"))var l=n,a=n.get("id"),s=nfRadio.channel("fields").request("get:field",l.get("confirm_field")),d=s.get("value"),c=o;else if(n.get("confirm_with"))var l=nfRadio.channel("fields").request("get:field",n.get("confirm_with")),a=l.get("id"),c=l.get("value"),d=c;"undefined"!=typeof l&&(""==c?(l.removeWrapperClass("nf-fail"),l.removeWrapperClass("nf-pass"),nfRadio.channel("fields").request("remove:error",a,t)):o==d?(l.removeWrapperClass("nf-fail"),l.addWrapperClass("nf-pass"),nfRadio.channel("fields").request("remove:error",a,t)):(l.removeWrapperClass("nf-pass"),l.addWrapperClass("nf-fail"),nfRadio.channel("fields").request("add:error",a,t,i)))}});return n}),i("controllers/updateFieldModel",[],function(){var e=Marionette.Object.extend({initialize:function(){nfRadio.channel("nfAdmin").reply("update:field",this.updateField)},updateField:function(e,t){e.get("isUpdated")||(e.set("value",t),e.set("isUpdated",!0))}});return e}),i("controllers/submitButton",[],function(){var e=Marionette.Object.extend({initialize:function(e){this.model=e;var t=nfRadio.channel("form-"+e.get("formID")),i=nfRadio.channel("fields"),n=nfRadio.channel("field-"+e.get("id"));this.listenTo(i,"add:error",this.updateSubmit,this),this.listenTo(i,"remove:error",this.updateSubmit,this),this.listenTo(n,"click:field",this.submitForm,this),this.listenTo(t,"disable:submit",this.disableSubmit,this),this.listenTo(t,"enable:submit",this.enableSubmit,this)},updateSubmit:function(e,t,i){e.get("formID")==this.model.get("formID")&&(nfRadio.channel("form").request("get:errors",e.get("formID"))?this.disableSubmit(e,t,i):this.enableSubmit(e,t))},disableSubmit:function(e,t,i){"disabled"!=this.model.get("disabled")&&(this.model.set("disabled","disabled"),this.model.set("reRender",!0))},enableSubmit:function(e,t){"disabled"==this.model.get("disabled")&&(this.model.set("disabled",""),this.model.set("reRender",!0))},submitForm:function(e,t){this.processingLabel();var i=nfRadio.channel("form").request("get:el"),n=jQuery(i).find(".nf-field-hp").val();if(""!=jQuery.trim(n))return nfRadio.channel("form-"+t.get("formID")).request("add:error","hp","Honeypot Error"),nfRadio.channel("submit").trigger("error",t.get("formID")),this.resetLabel(),!1;nfRadio.channel("form-"+t.get("formID")).request("remove:error","hp");var r=nfRadio.channel("form").request("get:errors",this.model.get("formID"));if(r)return nfRadio.channel("submit").trigger("error",t.get("formID")),jQuery(e).closest(".nf-field-wrap").find(".nf-field-submit-error").show(),!1;var o=nfRadio.channel("app").request("get:form",t.get("formID"));if(_.each(o.get("fields").models,function(e){nfRadio.channel("submit").trigger("validate:field",e),nfRadio.channel(e.get("type")).trigger("before:submit",e),nfRadio.channel("fields").trigger("before:submit",e)}),nfRadio.channel("submit").trigger("before:submit",o),r=nfRadio.channel("form").request("get:errors",this.model.get("formID")))return nfRadio.channel("submit").trigger("error",t.get("formID")),this.resetLabel(),!1;var l=JSON.stringify(o),a={action:"nf_ajax_submit",security:nfFrontEnd.ajaxNonce,formData:l},s=this;jQuery.ajax({url:nfFrontEnd.adminAjax,type:"POST",data:a,cache:!1,success:function(e,t,i){var n=jQuery.parseJSON(e);nfRadio.channel("submit").trigger("submit:response",n,t,i),s.resetLabel()},error:function(e,t,i){console.log("ERRORS: "+t),nfRadio.channel("submit").trigger("submit:response","error",t,e,i),s.resetLabel()}})},processingLabel:function(){this.label=this.model.get("label");var e=this.model.get("processing_label");this.model.set("label",e),this.model.set("reRender",!0)},resetLabel:function(){this.model.set("label",this.label),this.model.set("reRender",!0)}});return e}),i("controllers/submitInit",["controllers/submitButton"],function(e){var t=nfRadio.channel("submit"),i=Marionette.Object.extend({initialize:function(){this.listenTo(t,"init:model",this.registerSubmit)},registerSubmit:function(t){t.set("maybeRenderError",this.maybeRenderError),new e(t)},maybeRenderError:function(){if(nfRadio.channel("form").request("get:errors",this.formID)){var e=_.template(jQuery("#nf-tmpl-field-submit-error-msg").html());return e(this)}return""}});return i}),i("controllers/getFormErrors",[],function(){var e=(nfRadio.channel("fields"),Marionette.Object.extend({initialize:function(e){nfRadio.channel("form").reply("get:errors",this.getFormErrors)},getFormErrors:function(e){var t=nfRadio.channel("app").request("get:form",e),i=!1;return t&&(0!==t.get("errors").length&&_.each(t.get("errors").models,function(e){i=i||{},i[e.get("id")]=e.get("msg")}),_.each(t.get("fields").models,function(e){"submit"!=e.get("type")&&e.get("errors").length>0&&(i=i||{},i[e.get("id")]=e.get("errors"))})),i}}));return e}),i("models/fileModel",[],function(){var e=Backbone.Model.extend({});return e}),i("models/fileCollection",["models/fileModel"],function(e){var t=Backbone.Collection.extend({model:e});return t}),i("views/fileItem",[],function(){var e=Marionette.ItemView.extend({tagName:"nf-section",template:"#nf-tmpl-field-file-row",onRender:function(){this.$el=this.$el.children(),this.$el.unwrap(),this.setElement(this.$el),0==jQuery(this.el).find("input:file").length&&jQuery(this.el).find(".nf-file-input").append(this.model.get("fileInput"))}});return e}),i("views/fileCollection",["views/fileItem"],function(e){var t=Marionette.CollectionView.extend({childView:e});return t}),i("controllers/selectFile",["models/fileCollection","views/fileCollection"],function(e,t){var i=Marionette.Object.extend({initialize:function(){this.listenTo(nfRadio.channel("file"),"init:model",this.initFile),this.listenTo(nfRadio.channel("file"),"render:view",this.renderView)},renderFileInput:function(){var e=_.template(jQuery("#nf-tmpl-field-file-input").html());return e(this)},initFile:function(t){t.set("files",new e),t.set("renderFileInput",this.renderFileInput),this.listenTo(nfRadio.channel("file"),"change:field",this.changeFile),this.listenTo(nfRadio.channel("fields"),"click:field",this.clickFileButton)},renderView:function(e){var i=jQuery(e.el).children(".nf-files-table");e.fileCollectionView=new t({el:i,collection:e.model.get("files"),thisModel:this.model}),e.model.bind("change:files",this.changeCollection,e)},changeCollection:function(){this.fileCollectionView.render()},clickFileButton:function(e,t){(jQuery(e).hasClass("nf-file-button")||jQuery(e).hasClass("nf-file-reset"))&&jQuery(e).closest(".nf-field-wrap").find("input[type=file].nf-element").click()},changeFile:function(e,t){if(""==jQuery(e).val())return!1;var i=jQuery(e)[0].files[0].name;console.log(jQuery(e).length);var n="",r=jQuery.trim(i);n=r.replace(/[^a-z0-9-]/gi,"-").replace(/-+/g,"-").replace(/^-|-$/g,"");var o=t.get("files");if(!o.get(n)){var l=jQuery(e),a=jQuery(e).clone();jQuery(l).removeClass("nf-element").off(),jQuery(a).val(""),jQuery(l).replaceWith(a),o.add({id:n,filename:i,fileInput:l}),t.set("files",o),t.trigger("change:files",t)}}});return i}),i("controllers/validateRequired",[],function(){var e=Marionette.Object.extend({initialize:function(){this.listenTo(nfRadio.channel("fields"),"blur:field",this.validateRequired),this.listenTo(nfRadio.channel("fields"),"change:field",this.validateRequired),this.listenTo(nfRadio.channel("fields"),"keyup:field",this.validateKeyup),this.listenTo(nfRadio.channel("fields"),"change:modelValue",this.validateModelData),this.listenTo(nfRadio.channel("submit"),"validate:field",this.validateModelData)},validateKeyup:function(e,t,i){var n=nfRadio.channel("fields").request("get:error",t.get("id"),"required-error");!n&&t.get("clean")||1!=t.get("required")||this.validateRequired(e,t)},validateRequired:function(e,t){if(1!=t.get("required"))return!1;var i=jQuery(e).val(),n=nfRadio.channel(t.get("type")).request("validate:required",e,t),r=!0,o=t.get("mask");if(o&&(o=o.replace(/9/g,"_"),o=o.replace(/a/g,"_"),o=o.replace(/\*/g,"_")),jQuery.trim(i)&&i!=o||(r=!1),"undefined"!=typeof n)var l=n;else var l=r;this.maybeError(l,t)},validateModelData:function(e){if(1!=e.get("required"))return!1;currentValue=e.get("value");var t=!0;jQuery.trim(currentValue)||(t=!1);var i=t;this.maybeError(i,e)},maybeError:function(e,t){e?nfRadio.channel("fields").request("remove:error",t.get("id"),"required-error"):nfRadio.channel("fields").request("add:error",t.get("id"),"required-error","This is a required field.")}});return e}),i("controllers/submitError",[],function(){var e=nfRadio.channel("submit"),t=Marionette.Object.extend({initialize:function(){this.listenTo(e,"submit:response",this.submitErrors)},submitErrors:function(e){_.size(e.errors)>0&&_.each(e.errors,function(e,t){nfRadio.channel("fields").request("add:error",t,"required-error",e)})}});return t}),i("controllers/actionRedirect",[],function(){var e=nfRadio.channel("submit"),t=Marionette.Object.extend({initialize:function(){this.listenTo(e,"submit:response",this.actionRedirect)},actionRedirect:function(e){"undefined"!=typeof e.data.halt&&"undefined"!=typeof e.data.halt.redirect&&""!=e.data.halt.redirect&&(window.location=e.data.halt.redirect),0==_.size(e.errors)&&"undefined"!=typeof e.data.actions&&"undefined"!=typeof e.data.actions.redirect&&""!=e.data.actions.redirect&&(window.location=e.data.actions.redirect)}});return t}),i("controllers/actionSuccess",[],function(){var e=Marionette.Object.extend({initialize:function(){this.listenTo(nfRadio.channel("submit"),"submit:response",this.actionSubmit)},actionSubmit:function(e){0==_.size(e.errors)&&"undefined"!=typeof e.data.actions&&"undefined"!=typeof e.data.actions.success_message&&""!=e.data.actions.success_message&&jQuery(".nf-response-msg").html(e.data.actions.success_message)}});return e}),i("controllers/fieldSelect",[],function(){var e=Marionette.Object.extend({initialize:function(){this.listenTo(nfRadio.channel("listselect"),"init:model",this.register),this.listenTo(nfRadio.channel("liststate"),"init:model",this.register),this.listenTo(nfRadio.channel("listcountry"),"init:model",this.register),this.listenTo(nfRadio.channel("listmultiselect"),"init:model",this.register),nfRadio.channel("listselect").reply("get:calcValue",this.getCalcValue,this),nfRadio.channel("listmultiselect").reply("get:calcValue",this.getCalcValue,this)},register:function(e){if(e.set("renderOptions",this.renderOptions),e.set("renderOtherAttributes",this.renderOtherAttributes),0!=e.get("options").length){if("listmultiselect"==e.get("type")){var t=_.filter(e.get("options"),function(e){return 1==e.selected});t=_.map(t,function(e){return e.value});var i=t}else{var t=_.find(e.get("options"),function(e){return 1==e.selected});"undefined"==typeof t&&(t=e.get("options")[0]);var i=t.value}e.set("value",i)}},renderOptions:function(){var e=this,t="";return _.each(this.options,function(i){if(1==i.selected)var n=!0;else var n=!1;i.selected=n,i.fieldID=e.id,i.classes=e.classes,i.currentValue=e.value;var r=_.template(jQuery("#nf-tmpl-field-listselect-option").html());t+=r(i)}),t},renderOtherAttributes:function(){var e="";return"listmultiselect"==this.type&&(e+=" multiple"),e},getCalcValue:function(e){var t=0,i=e.get("options");if(0!=i.length)if("listmultiselect"==e.get("type"))_.each(e.get("value"),function(e){var n=_.find(i,function(t){return t.value==e});t=math.add(t,n.calc)});else{var n=_.find(i,function(t){return e.get("value")==t.value});"undefined"==typeof n&&(n=e.get("options")[0]),t=n.calc}return t}});return e}),i("controllers/coreSubmitResponse",[],function(){var e=Marionette.Object.extend({initialize:function(){this.listenTo(nfRadio.channel("submit"),"submit:response",this.actionSubmit)},actionSubmit:function(e){if(1==e.data.settings.clear_complete){var t=nfRadio.channel("app").request("get:form",e.data.form_id);t.get("fields").reset(t.get("loadedFields"))}1==e.data.settings.hide_complete&&(jQuery(".nf-fields").hide(),jQuery(".nf-form-title").hide())}});return e}),i("controllers/fieldProduct",[],function(){var e=Marionette.Object.extend({initialize:function(){this.listenTo(nfRadio.channel("product"),"init:model",this.register)},register:function(e){e.set("renderProductQuantity",this.renderProductQuantity),e.set("renderProduct",this.renderProduct),e.set("renderOptions",this.renderOptions)},renderProduct:function(){switch(this.product_type){case"user":var e=_.template(jQuery("#nf-tmpl-field-textbox").html());return e(this);case"hidden":var e=_.template(jQuery("#nf-tmpl-field-hidden").html());return e(this);case"dropdown":var e=_.template(jQuery("#nf-tmpl-product-dropdown").html());return e(this);default:var e=_.template(jQuery("#nf-tmpl-product-single").html());return e(this)}},renderProductQuantity:function(){if(1==this.product_use_quantity){var e=_.template(jQuery("#nf-tmpl-product-quantity").html());return e(this)}},renderOptions:function(){var e=this,t="";return _.each(this.options,function(i){if(1==i.selected)var n=!0;else var n=!1;i.selected=n,i.fieldID=e.id,i.classes=e.classes,i.currentValue=e.value;var r=_.template(jQuery("#nf-tmpl-product-"+e.product_type+"-option").html());t+=r(i)}),t}});return e}),i("controllers/fieldTotal",[],function(){var e=Marionette.Object.extend({totalModel:{},productTotals:{},initialize:function(){this.listenTo(nfRadio.channel("total"),"init:model",this.register),this.listenTo(nfRadio.channel("shipping"),"init:model",this.registerShipping)},register:function(e){this.totalModel=e;var t=e.get("formID");this.listenTo(nfRadio.channel("form-"+t),"loaded",this.onFormLoaded),this.listenTo(nfRadio.channel("product"),"change:modelValue",this.onChangeProduct),this.listenTo(nfRadio.channel("quantity"),"change:modelValue",this.onChangeQuantity)},registerShipping:function(e){this.shippingCost=e.get("shipping_cost")},onFormLoaded:function(e){var t=e.get("fields").models,i={},n={};for(var r in t){var o=t[r],l=o.get("id");if("product"==o.get("type"))i[l]=o;else if("quantity"==o.get("type")){var a=o.get("product_assignment");n[a]=o}}for(var a in i){var s=i[a],d=Number(s.get("product_price"));n[a]?d*=n[a].get("value"):1==s.get("product_use_quantity")&&(d*=s.get("value")),this.productTotals[a]=d}this.updateTotal()},onChangeProduct:function(e){var t=e.get("id"),i=Number(e.get("product_price")),n=Number(e.get("value")),r=n*i;this.productTotals[t]=r,this.updateTotal()},onChangeQuantity:function(e){var t=e.get("product_assignment"),i=nfRadio.channel("fields").request("get:field",t),n=Number(i.get("product_price")),r=Number(e.get("value")),o=r*n;this.productTotals[t]=o,this.updateTotal()},updateTotal:function(){var e=0;for(var t in this.productTotals)e+=Number(this.productTotals[t]);e&&this.shippingCost&&(e+=Number(this.shippingCost)),this.totalModel.set("value",e.toFixed(2)),this.totalModel.set("reRender",!0),this.totalModel.set("reRender",!1)}});return e}),i("controllers/fieldQuantity",[],function(){var e=Marionette.Object.extend({initialize:function(){this.listenTo(nfRadio.channel("quantity"),"init:model",this.registerQuantity)},registerQuantity:function(e){var t=e.get("product_assignment"),i=nfRadio.channel("fields").request("get:field",t);i&&i.set("product_use_quantity",0)}});return e}),i("models/calcModel",[],function(){var e=Backbone.Model.extend({initialize:function(){this.set("formID",this.collection.options.formModel.get("id")),this.set("fields",{}),nfRadio.channel("calc").trigger("init:model",this),this.on("change:value",this.changeValue,this)},changeField:function(e){nfRadio.channel("calc").trigger("change:field",this,e)},changeCalc:function(e){nfRadio.channel("calc").trigger("change:calc",this,e)},changeValue:function(){nfRadio.channel("calc").trigger("change:value",this);
}});return e}),i("models/calcCollection",["models/calcModel"],function(e){var t=Backbone.Collection.extend({model:e,comparator:"order",initialize:function(e,t){this.options=t}});return t}),i("controllers/calculations",["models/calcCollection"],function(e){var t=Marionette.Object.extend({initialize:function(){this.calcs={},this.displayFields={},this.listenTo(nfRadio.channel("form"),"loaded",this.registerCalcs),this.listenTo(nfRadio.channel("calc"),"change:field",this.changeField),this.listenTo(nfRadio.channel("calc"),"change:calc",this.changeCalc);var e=this;_.each(nfFrontEnd.use_merge_tags.calculations,function(t){e.listenTo(nfRadio.channel("fields-"+t),"init:model",e.initDisplayField)}),this.listenTo(nfRadio.channel("calc"),"change:value",this.updateDisplayFields),this.init={}},registerCalcs:function(t){var i=new e(t.get("settings").calculations,{formModel:t});this.calcs[t.get("id")]=i;var n=this;_.each(i.models,function(e){n.init[e.get("name")]=!0,n.setupCalc(e)})},setupCalc:function(e){var t=this,i=e.get("eq"),n=i,r=i.match(new RegExp(/{field:(.*?)}/g));r&&(r=r.map(function(i){var r=i.replace("}","").replace("{field:","");if(fieldModel=nfRadio.channel("form-"+e.get("formID")).request("get:fieldByKey",r),"undefined"!=typeof fieldModel){fieldModel.on("change:value",e.changeField,e);var o=t.getCalcValue(fieldModel);t.updateCalcFields(e,r,o),n=t.replaceKey("field",r,o,n)}}));var o=i.match(new RegExp(/{calc:(.*?)}/g));o&&(o=o.map(function(i){var r=i.replace("}","").replace("{calc:",""),o=e.collection.findWhere({name:r});o.on("change:value",e.changeCalc,e);var l=o.get("value");n=t.replaceKey("calc",r,l,n)}));try{e.set("value",math.eval(n))}catch(l){console.log(l)}},updateCalcFields:function(e,t,i){var n=e.get("fields");n[t]=i,e.set("fields",n)},getCalcValue:function(e){var t=nfRadio.channel(e.get("type")).request("get:calcValue",e);return"undefined"==typeof t&&(t=jQuery.isNumeric(e.get("value"))?e.get("value"):0),jQuery.isNumeric(t)?t:0},replaceKey:function(e,t,i,n){n=n||calcModel.get("eq"),t="{"+e+":"+t+"}";var r=new RegExp(t,"g");return n.replace(r,i)},replaceAllKeys:function(e){var t=e.get("eq"),i=this;_.each(e.get("fields"),function(e,n){t=i.replaceKey("field",n,e,t)});var n=t.match(new RegExp(/{calc:(.*?)}/g));return n&&_.each(n,function(i){var n=i.replace("}","").replace("{calc:",""),r=e.collection.findWhere({name:n}),o=new RegExp(i,"g");t=t.replace(o,r.get("value"))}),t},changeField:function(e,t){var i=t.get("key"),n=this.getCalcValue(t);this.updateCalcFields(e,i,n);var r=this.replaceAllKeys(e);e.set("value",math.eval(r))},initDisplayField:function(e){if(e.get("default")){var t=e.get("default").match(new RegExp(/{calc:(.*?)}/g));if(t){var i=this;_.each(t,function(t){t=t.replace("{calc:","").replace("}",""),i.displayFields[t]=i.displayFields[t]||[],i.displayFields[t].push(e)})}}},updateDisplayFields:function(e){var t=this;"undefined"!=typeof this.displayFields[e.get("name")]&&_.each(this.displayFields[e.get("name")],function(i){var n=i.get("default"),r=n.match(new RegExp(/{calc:(.*?)}/g));_.each(r,function(e){var r=e.replace("}","").replace("{calc:",""),o=t.calcs[i.get("formID")].findWhere({name:r}),l=new RegExp(e,"g");n=n.replace(l,o.get("value"))}),i.set("value",n),t.init[e.get("name")]||i.set("reRender",!0),t.init[e.get("name")]=!1})},getCalc:function(e,t){return this.calcs[t].findWhere({name:e})},changeCalc:function(e,t){var i=this.replaceAllKeys(e);e.set("value",math.eval(i))}});return t}),i("controllers/fieldDate",[],function(){var e=Marionette.Object.extend({initialize:function(){this.listenTo(nfRadio.channel("date"),"render:view",this.initDatepicker)},initDatepicker:function(e){var t=pikadayResponsive(jQuery(e.el).find(".nf-element")[0],{format:e.model.get("date_format"),classes:"ninja-forms-field"});1==e.model.get("date_default")&&t.setDate(moment())}});return e}),i("controllers/fieldRecaptcha",[],function(){var e=Marionette.Object.extend({initialize:function(){this.listenTo(nfRadio.channel("recaptcha"),"init:model",this.initRecaptcha)},initRecaptcha:function(e){this.model=e,nfRadio.channel("recaptcha").reply("update:response",this.updateResponse,this)},updateResponse:function(e){this.model.set("value",e),nfRadio.channel("fields").request("remove:error",this.model.get("id"),"required-error")}});return e}),i("controllers/helpText",[],function(){var e=Marionette.Object.extend({initialize:function(){this.listenTo(nfRadio.channel("form"),"render:view",this.initHelpText)},initHelpText:function(e){jQuery(e.el).find(".nf-help").each(function(){jQuery(this).jBox("Tooltip",{theme:"TooltipBorder",content:jQuery(this).data("text")})})}});return e}),i("controllers/fieldTextareaRTE",[],function(){var e=Marionette.Object.extend({initialize:function(){this.listenTo(nfRadio.channel("textarea"),"render:view",this.initTextareaRTEs),this.listenTo(nfRadio.channel("fields"),"click:extra",this.clickExtra),this.meta_image_frame,jQuery.summernote.options.icons={align:"dashicons dashicons-editor-alignleft",alignCenter:"dashicons dashicons-editor-aligncenter",alignJustify:"dashicons dashicons-editor-justify",alignLeft:"dashicons dashicons-editor-alignleft",alignRight:"dashicons dashicons-editor-alignright",indent:"dashicons dashicons-editor-indent",outdent:"dashicons dashicons-editor-outdent",bold:"dashicons dashicons-editor-bold",caret:"dashicons dashicons-arrow-down",close:"dashicons dashicons-dismiss",code:"dashicons dashicons-editor-code",eraser:"dashicons dashicons-editor-removeformatting",italic:"dashicons dashicons-editor-italic",link:"dashicons dashicons-admin-links",unlink:"dashicons dashicons-editor-unlink",magic:"dashicons dashicons-editor-paragraph",minus:"dashicons dashicons-minus",orderedlist:"dashicons dashicons-editor-ol",redo:"dashicons dashicons-redo",square:"dashicons fa-square",table:"dashicons dashicons-editor-table",underline:"dashicons dashicons-editor-underline",undo:"dashicons dashicons-undo",unorderedlist:"dashicons dashicons-editor-ul"},this.currentContext={}},initTextareaRTEs:function(e){if(1!=e.model.get("textarea_rte"))return!1;var t=this,i=function(e){return t.linkButton(e)},n=function(e){return t.mediaButton(e)},r=[["paragraphStyle",["style"]],["fontStyle",["bold","italic","underline","clear"]],["lists",["ul","ol"]],["paragraph",["paragraph"]],["customGroup",["linkButton","unlink"]],["table",["table"]],["actions",["undo","redo"]]];1==e.model.get("textarea_media")&&0!=userSettings.uid&&r.push(["tools",["mediaButton"]]),jQuery(e.el).find(".nf-element").summernote({toolbar:r,buttons:{linkButton:i,mediaButton:n},height:150,codemirror:{theme:"monokai",lineNumbers:!0},prettifyHtml:!0,callbacks:{onChange:function(t){e.model.set("value",jQuery(this).summernote("code"))}}})},linkButton:function(e){var t=this,i=jQuery.summernote.ui,n=_.template(jQuery("#nf-tmpl-rte-link-button").html()),r=_.template(jQuery("#nf-tmpl-rte-link-dropdown").html());return i.buttonGroup([i.button({className:"dropdown-toggle",contents:n({}),tooltip:"Insert Link",click:function(i){t.clickLinkButton(i,e)},data:{toggle:"dropdown"}}),i.dropdown([i.buttonGroup({children:[i.button({contents:r({}),tooltip:""})]})])]).render()},mediaButton:function(e){var t=this,i=jQuery.summernote.ui,n=_.template(jQuery("#nf-tmpl-rte-media-button").html());return i.button({className:"dropdown-toggle",contents:n({}),tooltip:"Insert Media",click:function(i){t.openMediaManager(i,e)}}).render()},openMediaManager:function(e,t){if(t.invoke("editor.saveRange"),this.meta_image_frame)return void this.meta_image_frame.open();this.meta_image_frame=wp.media.frames.meta_image_frame=wp.media({title:"Select a file",button:{text:"insert"}});var i=this;this.meta_image_frame.on("select",function(){var e=i.meta_image_frame.state().get("selection").first().toJSON();i.insertMedia(e,t)}),this.meta_image_frame.open()},clickLinkButton:function(e,t){var i=t.invoke("editor.createRange");t.invoke("editor.saveRange");var n=i.toString();this.currentContext=t,jQuery(e.target).closest(".note-customGroup > .note-btn-group").on("hide.bs.dropdown",function(e){return!1}),jQuery(e.target).closest(".note-customGroup > .note-btn-group").on("shown.bs.dropdown",function(e){jQuery(e.target).parent().parent().find(".link-text").val(n),jQuery(e.target).parent().parent().find(".link-url").focus()})},clickExtra:function(e){var t=jQuery(e.target).parent().find(".link-text"),i=jQuery(e.target).parent().find(".link-url"),n=jQuery(e.target).parent().find(".link-new-window");if(this.currentContext.invoke("editor.restoreRange"),jQuery(e.target).hasClass("insert-link")){var r=t.val(),o=i.val(),l=n.prop("checked")?!0:!1;0!=r.length&&0!=o.length&&this.currentContext.invoke("editor.createLink",{text:r,url:o,isNewWindow:l})}t.val(""),i.val(""),n.prop("checked",!1),jQuery(e.target).closest("div.note-btn-group.open").removeClass("open")},insertMedia:function(e,t){t.invoke("editor.restoreRange"),"image"==e.type?t.invoke("editor.insertImage",e.url):t.invoke("editor.createLink",{text:e.filename,url:e.url})}});return e}),i("controllers/fieldStarRating",[],function(){var e=Marionette.Object.extend({initialize:function(){this.listenTo(nfRadio.channel("starrating"),"init:model",this.register),this.listenTo(nfRadio.channel("starrating"),"render:view",this.initRating)},register:function(e){e.set("renderRatings",this.renderRatings)},initRating:function(e){jQuery(e.el).find(".starrating").rating()},renderRatings:function(){for(var e="",t=this["default"]-1;t>=0;t--){var i=_.template(jQuery("#nf-tmpl-field-starrating-star").html()),n=t+1;e+=i({id:this.id,classes:this.classes,num:n})}return e}});return e}),i("controllers/loadControllers",["controllers/formData","controllers/fieldError","controllers/changeField","controllers/changeEmail","controllers/fieldCheckbox","controllers/fieldCheckboxList","controllers/fieldRadio","controllers/fieldNumber","controllers/mirrorField","controllers/confirmField","controllers/updateFieldModel","controllers/submitInit","controllers/getFormErrors","controllers/selectFile","controllers/validateRequired","controllers/submitError","controllers/actionRedirect","controllers/actionSuccess","controllers/fieldSelect","controllers/coreSubmitResponse","controllers/fieldProduct","controllers/fieldTotal","controllers/fieldQuantity","controllers/calculations","controllers/fieldDate","controllers/fieldRecaptcha","controllers/helpText","controllers/fieldTextareaRTE","controllers/fieldStarRating"],function(e,t,i,n,r,o,l,a,s,d,c,f,u,h,m,g,p,v,y,b,R,w,_,x,j,C,M,k,Q){var F=Marionette.Object.extend({initialize:function(){new r,new o,new l,new a,new y,new R,new w,new _,new C,new M,new k,new Q,new t,new i,new n,new s,new d,new c,new f,new u,new h,new m,new g,new p,new v,new b,new x,new j,new e}});return F}),i("views/beforeForm",[],function(){var e=Marionette.ItemView.extend({tagName:"nf-section",template:"#nf-tmpl-before-form"});return e}),i("views/fieldErrorItem",[],function(){var e=Marionette.ItemView.extend({tagName:"nf-section",template:"#nf-tmpl-field-error",onRender:function(){this.$el=this.$el.children(),this.$el.unwrap(),this.setElement(this.$el)}});return e}),i("views/fieldErrorCollection",["views/fieldErrorItem"],function(e){var t=Marionette.CollectionView.extend({tagName:"nf-errors",childView:e});return t}),i("views/inputLimit",[],function(){var e=Marionette.ItemView.extend({tagName:"nf-section",template:"#nf-tmpl-field-input-limit",initialize:function(){this.listenTo(nfRadio.channel("field-"+this.model.get("id")),"keyup:field",this.updateCount),this.count=this.model.get("input_limit"),this.render()},updateCount:function(e,t){var i=jQuery(e).val(),n=/\s+/gi,r=i.trim().replace(n," ").split(" "),o=r.length,l=i.length;if("characters"==this.model.get("input_limit_type"))this.count=this.model.get("input_limit")-l;else{this.count=this.model.get("input_limit")-o;var a=this.model.get("input_limit");o>a&&jQuery(e).val(r.slice(0,a).join(" "))}this.render()},templateHelpers:function(){var e=this;return{currentCount:function(){return e.count}}}});return e}),i("views/fieldItem",["views/fieldErrorCollection","views/inputLimit"],function(e,t){var i=Marionette.ItemView.extend({tagName:"nf-section",initialize:function(){this.model.on("change:reRender",this.maybeRender,this),this.model.on("change:errors",this.changeError,this),this.model.on("change:addWrapperClass",this.addWrapperClass,this),this.model.on("change:removeWrapperClass",this.removeWrapperClass,this),this.template="#nf-tmpl-field-"+this.model.get("wrap_template")},onBeforeDestroy:function(){this.model.off("change:reRender",this.maybeRender),this.model.off("change:errors",this.changeError),this.model.off("change:addWrapperClass",this.addWrapperClass),this.model.off("change:removeWrapperClass",this.removeWrapperClass)},test:function(e){console.log("firing from trigger 1")},changeError:function(){0==this.model.get("errors").models.length?this.model.removeWrapperClass("nf-error"):this.model.addWrapperClass("nf-error"),this.errorCollectionView.render()},addWrapperClass:function(){var e=this.model.get("addWrapperClass");""!=e&&(jQuery(this.el).addClass(e),this.model.set("addWrapperClass",""))},removeWrapperClass:function(){var e=this.model.get("removeWrapperClass");""!=e&&(jQuery(this.el).removeClass(e),this.model.set("removeWrapperClass",""))},maybeRender:function(){this.model.get("reRender")&&(this.model.set("reRender",!1,{silent:!0}),this.render())},onRender:function(){this.$el=this.$el.children(),this.$el.unwrap(),this.setElement(this.$el);var i=jQuery(this.el).children(".nf-error-wrap");if(this.errorCollectionView=new e({el:i,collection:this.model.get("errors"),thisModel:this.model}),"undefined"!=typeof this.model.get("input_limit")&&""!=jQuery.trim(this.model.get("input_limit"))&&(i=jQuery(this.el).children(".nf-input-limit"),this.inputLimitView=new t({el:i,model:this.model})),"undefined"!=typeof this.model.get("mask")&&""!=jQuery.trim(this.model.get("mask"))){if("custom"==this.model.get("mask"))var n=this.model.get("custom_mask");else var n=this.model.get("mask");Number.isInteger(n)&&(n=n.toString()),jQuery(this.el).find(".nf-element").mask(n)}nfRadio.channel(this.model.get("type")).trigger("render:view",this),nfRadio.channel("fields").trigger("render:view",this)},templateHelpers:function(){return{renderElement:function(){this.setPlaceholder(),this.setClasses();var e=_.find(this.element_templates,function(e){return 0<jQuery("#nf-tmpl-field-"+e).length?!0:void 0}),t=_.template(jQuery("#nf-tmpl-field-"+e).html());return t(this)},renderLabel:function(){var e=_.template(jQuery("#nf-tmpl-field-label").html());return e(this)},setPlaceholder:function(){"inside"==this.label_pos&&(this.placeholder=this.label)},renderPlaceholder:function(){return""!=jQuery.trim(this.placeholder)?'placeholder="'+this.placeholder+'"':""},renderWrapClass:function(){var e="field-wrap "+this.type+"-wrap label-"+this.label_pos;return"undefined"!=typeof this.wrapper_class&&0<jQuery.trim(this.wrapper_class).length&&(e+=" "+this.wrapper_class),"undefined"!=typeof this.old_classname&&0<jQuery.trim(this.old_classname).length&&(e+=" "+this.old_classname+"-wrap"),e},setClasses:function(){this.error?this.classes+=" nf-error":this.classes=this.classes.replace("nf-error",""),"undefined"!=typeof this.element_class&&0<jQuery.trim(this.element_class).length&&(this.classes+=" "+this.element_class)},maybeDisabled:function(){return 1==this.disable_input?"disabled":""},maybeDisableAutocomplete:function(){return 1==this.disable_browser_autocomplete?'autocomplete="off"':""},maybeInputLimit:function(){return"characters"==this.input_limit_type&&""!=jQuery.trim(this.input_limit)?'maxlength="'+this.input_limit+'"':""},getHelpText:function(){return this.help_text=jQuery(this.help_text).html(),"undefined"!=typeof this.help_text?this.help_text.replace(/"/g,"&quot;"):""},maybeRenderHelp:function(){var e="<p>"+this.help_text+"</p>";return"undefined"!=typeof this.help_text&&0!=jQuery.trim(jQuery(e).text()).length?'<span class="dashicons dashicons-admin-comments nf-help" data-text="'+this.getHelpText()+'"></span>':""},renderDescText:function(){var e="<p>"+this.desc_text+"</p>";return 0!=jQuery.trim(jQuery(e).text()).length?this.desc_text:""},maybeChecked:function(){return"undefined"!=typeof this.default_value&&"checked"==this.default_value?" checked":""}}},events:{"change .nf-element":"fieldChange","keyup .nf-element":"fieldKeyup","click .nf-element":"fieldClick","click .extra":"extraClick","blur .nf-element":"fieldBlur"},fieldChange:function(e){console.log("change");var t=jQuery(e.currentTarget);nfRadio.channel("nfAdmin").request("change:field",t,this.model)},fieldKeyup:function(e){var t=jQuery(e.currentTarget),i=e.keyCode;nfRadio.channel("field-"+this.model.get("id")).trigger("keyup:field",t,this.model),nfRadio.channel(this.model.get("type")).trigger("keyup:field",t,this.model,i),nfRadio.channel("fields").trigger("keyup:field",t,this.model,i)},fieldClick:function(e){var t=jQuery(e.currentTarget);nfRadio.channel("field-"+this.model.get("id")).trigger("click:field",t,this.model),nfRadio.channel(this.model.get("type")).trigger("click:field",t,this.model),nfRadio.channel("fields").trigger("click:field",t,this.model)},extraClick:function(e){nfRadio.channel("field-"+this.model.get("id")).trigger("click:extra",e,this.model),nfRadio.channel(this.model.get("type")).trigger("click:extra",e,this.model),nfRadio.channel("fields").trigger("click:extra",e,this.model)},fieldBlur:function(e){var t=jQuery(e.currentTarget);nfRadio.channel("field-"+this.model.get("id")).trigger("blur:field",t,this.model),nfRadio.channel(this.model.get("type")).trigger("blur:field",t,this.model),nfRadio.channel("fields").trigger("blur:field",t,this.model)}});return i}),i("views/beforeField",[],function(){var e=Marionette.ItemView.extend({tagName:"nf-section",template:"#nf-tmpl-field-before"});return e}),i("views/afterField",[],function(){var e=Marionette.ItemView.extend({tagName:"nf-section",template:"#nf-tmpl-field-after"});return e}),i("views/fieldLayout",["views/fieldItem","views/beforeField","views/afterField"],function(e,t,i){var n=Marionette.LayoutView.extend({tagName:"nf-section",template:"#nf-tmpl-field-layout",regions:{beforeField:".nf-before-field",field:".nf-field",afterField:".nf-after-field"},onRender:function(){this.$el=this.$el.children(),this.$el.unwrap(),this.setElement(this.$el)},onShow:function(){this.beforeField.show(new t({model:this.model})),this.field.show(new e({model:this.model})),this.afterField.show(new i({model:this.model}))}});return n}),i("views/fieldCollection",["views/fieldLayout"],function(e){var t=Marionette.CollectionView.extend({tagName:"nf-fields-wrap",childView:e});return t}),i("views/afterFields",[],function(){var e=Marionette.ItemView.extend({tagName:"nf-section",template:"#nf-tmpl-after-fields"});return e}),i("views/beforeFields",[],function(){var e=Marionette.ItemView.extend({tagName:"nf-section",template:"#nf-tmpl-before-fields"});return e}),i("views/formLayout",["views/fieldCollection","views/afterFields","views/beforeFields"],function(e,t,i){var n=Marionette.LayoutView.extend({tagName:"nf-section",template:"#nf-tmpl-form-layout",regions:{beforeFields:".nf-before-fields",fields:".nf-fields",afterFields:".nf-after-fields"},initialize:function(){nfRadio.channel("form-"+this.model.get("id")).reply("get:el",this.getEl,this)},onRender:function(){this.$el=this.$el.children(),this.$el.unwrap(),this.setElement(this.$el)},onShow:function(){this.beforeFields.show(new i({model:this.model})),this.fields.show(new e({collection:this.options.fieldCollection})),this.afterFields.show(new t({model:this.model}))},getEl:function(){return this.el},templateHelpers:function(){return{renderClasses:function(){return""}}}});return n}),i("views/afterForm",[],function(){var e=Marionette.ItemView.extend({tagName:"nf-section",template:"#nf-tmpl-after-form"});return e}),i("views/formErrorItem",[],function(){var e=Marionette.ItemView.extend({tagName:"nf-section",template:"#nf-tmpl-form-error",onRender:function(){}});return e}),i("views/formErrorCollection",["views/formErrorItem"],function(e){var t=Marionette.CollectionView.extend({tagName:"nf-errors",childView:e});return t}),i("views/mainLayout",["views/beforeForm","views/formLayout","views/afterForm","views/formErrorCollection"],function(e,t,i,n){var r=Marionette.LayoutView.extend({template:"#nf-tmpl-layout",regions:{responseMsg:".nf-response-msg",formErrors:".nf-form-errors",beforeForm:".nf-before-form",formLayout:".nf-form-layout",afterForm:".nf-after-form"},initialize:function(){this.$el=jQuery("#nf-form-"+this.model.id+"-cont"),this.el="#nf-form-"+this.model.id+"-cont",this.render(),this.formErrors.show(new n({collection:this.model.get("errors")})),this.beforeForm.show(new e({model:this.model})),this.formLayout.show(new t({model:this.model,fieldCollection:this.options.fieldCollection})),this.afterForm.show(new i({model:this.model}))},onRender:function(){}});return r}),jQuery(document).ready(function(e){t(["models/formCollection","models/formModel","models/fieldCollection","controllers/loadControllers","views/mainLayout"],function(e,t,i,n,r){var o=Marionette.Application.extend({forms:{},initialize:function(e){if("undefined"!=typeof nfFrontEnd.resumeProcessing){var t=JSON.stringify(nfFrontEnd.resumeProcessing),i={action:"nf_ajax_resume",security:nfFrontEnd.ajaxNonce,formData:t};jQuery.ajax({url:nfFrontEnd.adminAjax,type:"POST",data:i,cache:!1,success:function(e,t,i){var n=jQuery.parseJSON(e);nfRadio.channel("submit").trigger("submit:response",n,t,i)},error:function(e,t,i){console.log("ERRORS: "+t),nfRadio.channel("submit").trigger("submit:response","error",t,e,i)}})}new n},onStart:function(){var e=nfRadio.channel("app").request("get:forms");_.each(e.models,function(e,t){var i=new r({model:e,fieldCollection:e.get("fields")});nfRadio.channel("form").trigger("render:view",i)})}}),l=new o;l.start()})}),i("main",function(){})}();
//# sourceMappingURL=almond.build.js.map
//# sourceMappingURL=front-end.js.map
